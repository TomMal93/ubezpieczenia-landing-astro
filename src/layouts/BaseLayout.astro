---
import 'uno.css';
import '@/styles/global.css';

const {
  title = 'Ubezpieczenia – szybko, prosto, bez haczyków',
  description = 'Porównujemy oferty 12 towarzystw i pomagamy wybrać najlepszą ochronę.',
  ogImage = '/images/hero.jpg',
} = Astro.props as {
  title?: string;
  description?: string;
  ogImage?: string;
};
---

<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <title>{title}</title>

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta
      property="og:image"
      content={new URL(ogImage, Astro.site ?? 'https://przyklad-ubezpieczenia.pl').toString()}
    />
    <meta property="og:type" content="website" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
    <link rel="preload" href="/images/logo.svg" as="image" />

    <style is:global>
      .site-header[data-scrolled='true'] {
        box-shadow: var(--shadow-2);
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(6px);
      }
    </style>

    {
      import.meta.env.CF_WEB_ANALYTICS_TOKEN && (
        <script
          defer
          src="https://static.cloudflareinsights.com/beacon.min.js"
          data-cf-beacon={`{"token": "${import.meta.env.CF_WEB_ANALYTICS_TOKEN}"}`}
        />
      )
    }
  </head>
  <body>
    <header class="site-header sticky top-0 z-50 border-b border-[var(--surface-2)]">
      <nav class="container flex items-center justify-between py-3" aria-label="Główna nawigacja">
        <a href="/" class="flex items-center gap-2 ring-focus">
          <img src="/images/logo.svg" alt="" width="28" height="28" />
          <span class="font-semibold">TwojeUbezpieczenia</span>
        </a>
        <ul class="hidden md:flex items-center gap-6">
          <li><a class="btn-ghost" href="/#oferta">Oferta</a></li>
          <li><a class="btn-ghost" href="/#o-nas">O nas</a></li>
          <li><a class="btn-ghost" href="/blog">Blog</a></li>
          <li><a class="btn" href="/#kontakt" aria-label="Uzyskaj wycenę">Uzyskaj wycenę</a></li>
        </ul>
      </nav>
      <script>
        const header = document.querySelector('.site-header');
        const onScroll = () =>
          header && header.setAttribute('data-scrolled', String(window.scrollY > 4));
        onScroll();
        window.addEventListener('scroll', onScroll, { passive: true });
      </script>
    </header>

    <main><slot /></main>

    <footer class="mt-16 border-t border-[var(--surface-2)]">
      <div class="container py-10 grid gap-8 md:grid-cols-3">
        <div>
          <div class="flex items-center gap-2 mb-2">
            <img src="/images/logo.svg" alt="" width="24" height="24" />
            <strong>TwojeUbezpieczenia</strong>
          </div>
          <p class="muted">Bezpiecznie. Transparentnie. Po ludzku.</p>
        </div>
        <div>
          <div class="eyebrow mb-2">Szybkie linki</div>
          <ul class="space-y-1">
            <li><a href="/blog">Blog</a></li>
            <li><a href="/#kontakt">Kontakt</a></li>
            <li><a href="#">Polityka prywatności</a></li>
          </ul>
        </div>
        <div>
          <div class="eyebrow mb-2">Dane</div>
          <p>tel. 123 456 789<br />biuro@twojeubezpieczenia.pl</p>
        </div>
      </div>
      <div class="py-4 text-center text-sm muted">
        © {new Date().getFullYear()} TwojeUbezpieczenia
      </div>
    </footer>

    {!import.meta.env.DEV && <link rel="stylesheet" href="/_pagefind/pagefind-ui.css" />}
  </body>
</html>
