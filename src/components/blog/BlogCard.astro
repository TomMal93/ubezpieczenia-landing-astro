---
interface Props {
  title: string;
  href: string;
  excerpt?: string;
  cover?: { src: string; alt?: string; width?: number; height?: number };
  date?: string;
  readingTime?: number;
  tags?: string[];
}
const { title, href, excerpt, cover, date, readingTime, tags = [] } = Astro.props as Props;

const src = cover?.src ?? '';
const isRemote = /^https?:\/\//i.test(src);
const imgSrc = isRemote ? `${src}?auto=format&fit=max&w=800` : src;
---

<a href={href} class="block group card overflow-hidden">
  {
    cover && (
      <img
        src={imgSrc}
        alt={cover.alt ?? ''}
        width="800"
        height="450"
        loading="lazy"
        style="aspect-ratio:16/9;object-fit:cover;width:100%;display:block"
      />
    )
  }
  <div class="p-5 sm:p-6">
    <h3 class="text-xl font-semibold group-hover:underline">{title}</h3>
    {excerpt && <p class="mt-2 muted">{excerpt}</p>}
    <p class="mt-3 text-sm muted">
      {date && <span>{date}</span>}
      {readingTime && <span> Â· {readingTime} min czytania</span>}
    </p>
    {
      tags.length > 0 && (
        <div class="mt-3 flex flex-wrap gap-2">
          {tags.map((t) => (
            <span class="btn-ghost px-2 py-1 text-xs">#{t}</span>
          ))}
        </div>
      )
    }
  </div>
</a>
